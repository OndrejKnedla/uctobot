(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{2181:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eg});var s=a(5155),r=a(2115),n=a(8482),i=a(4964),l=a(8145),d=a(7168),c=a(7550),o=a(4355),u=a(6308),m=a(3311),x=a(7434),p=a(6874),h=a.n(p),v=a(2714),g=a(3999);function j(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,g.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}var f=a(5863);function b(e){let{className:t,value:a,...r}=e;return(0,s.jsx)(f.bL,{"data-slot":"progress",className:(0,g.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:(0,s.jsx)(f.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}var y=a(9026),N=a(7489);function k(e){let{className:t,orientation:a="horizontal",decorative:r=!0,...n}=e;return(0,s.jsx)(N.b,{"data-slot":"separator",decorative:r,orientation:a,className:(0,g.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}var w=a(2118),z=a(9869),_=a(1154),D=a(646),C=a(4861),A=a(1284);let P=0,S=new Map,T=e=>{if(S.has(e))return;let t=setTimeout(()=>{S.delete(e),I({type:"REMOVE_TOAST",toastId:e})},1e6);S.set(e,t)},F=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?T(a):e.toasts.forEach(e=>{T(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},V=[],R={toasts:[]};function I(e){R=F(R,e),V.forEach(e=>{e(R)})}function Z(e){let{...t}=e,a=(P=(P+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>I({type:"DISMISS_TOAST",toastId:a});return I({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>I({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function M(e){let{userId:t,onTransactionCreated:a}=e,[i,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[x,p]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),[f,N]=(0,r.useState)(0),[P,S]=(0,r.useState)(null),[T,F]=(0,r.useState)(!1),V=(0,r.useRef)(null),R=["image/png","image/jpeg","image/jpg","image/gif","image/bmp","image/tiff","image/webp"],I=e=>{if(!R.includes(e.type)){Z({title:"Nepodporovan\xfd form\xe1t",description:"Pros\xedm nahrajte obr\xe1zek (PNG, JPG, GIF, BMP, TIFF, WebP)",variant:"destructive"});return}if(e.size>0xa00000){Z({title:"Soubor je př\xedliš velk\xfd",description:"Maxim\xe1ln\xed velikost je 10MB",variant:"destructive"});return}c(e);let t=new FileReader;t.onload=e=>{var t;m(null===(t=e.target)||void 0===t?void 0:t.result)},t.readAsDataURL(e),S(null)},M=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?F(!0):"dragleave"===e.type&&F(!1)},O=async()=>{if(i){g(!0),N(0),S(null);try{let e=new FormData;e.append("user_id",t.toString()),e.append("file",i),x&&e.append("transaction_description",x);let s=setInterval(()=>{N(e=>Math.min(e+10,90))},200),r=await fetch("http://localhost:8000/ocr/process-receipt",{method:"POST",body:e});clearInterval(s),N(100);let n=await r.json();if(r.ok&&n.success)S(n),Z({title:"\xdačtenka zpracov\xe1na",description:n.message}),a&&n.transaction&&a(n.transaction);else throw Error(n.message||"Chyba při zpracov\xe1n\xed")}catch(e){S({success:!1,message:e.message||"Nastala neoček\xe1van\xe1 chyba"}),Z({title:"Chyba při zpracov\xe1n\xed",description:e.message||"Nastala neoček\xe1van\xe1 chyba",variant:"destructive"})}finally{g(!1)}}};return(0,s.jsxs)(n.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"w-5 h-5"}),"Nahr\xe1t \xfačtenku"]}),(0,s.jsx)(n.BT,{children:"Nahrajte fotografii \xfačtenky nebo faktury a AI automaticky extrahuje všechny \xfačetn\xed \xfadaje"})]}),(0,s.jsxs)(n.Wu,{className:"space-y-6",children:[(0,s.jsx)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(T?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400"),onDragEnter:M,onDragLeave:M,onDragOver:M,onDrop:e=>{e.preventDefault(),e.stopPropagation(),F(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&I(e.dataTransfer.files[0])},children:u?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("img",{src:u,alt:"N\xe1hled \xfačtenky",className:"max-h-64 mx-auto rounded-lg shadow-md"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[null==i?void 0:i.name," (",((null==i?void 0:i.size)||0)/1024/1024<1?"".concat(Math.round(((null==i?void 0:i.size)||0)/1024)," KB"):"".concat((((null==i?void 0:i.size)||0)/1024/1024).toFixed(1)," MB"),")"]}),(0,s.jsx)(d.$,{variant:"outline",onClick:()=>{c(null),m(null),p(""),S(null),N(0),V.current&&(V.current.value="")},disabled:h,children:"Změnit soubor"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(w.A,{className:"w-12 h-12 mx-auto text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium text-gray-900",children:"Přet\xe1hněte \xfačtenku sem"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"nebo klikněte pro v\xfdběr souboru"})]}),(0,s.jsxs)(d.$,{onClick:()=>{var e;return null===(e=V.current)||void 0===e?void 0:e.click()},disabled:h,children:[(0,s.jsx)(z.A,{className:"w-4 h-4 mr-2"}),"Vybrat soubor"]}),(0,s.jsx)("input",{ref:V,type:"file",accept:R.join(","),onChange:e=>{e.target.files&&e.target.files[0]&&I(e.target.files[0])},className:"hidden"})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v.J,{htmlFor:"description",children:"Dodatečn\xe9 informace (voliteln\xe9)"}),(0,s.jsx)(j,{id:"description",placeholder:"Např. 'N\xe1kup kancel\xe1řsk\xfdch potřeb pro projekt X'",value:x,onChange:e=>p(e.target.value),disabled:h,rows:2})]}),(0,s.jsx)(d.$,{onClick:O,disabled:!i||h,className:"w-full",size:"lg",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Zpracov\xe1v\xe1m..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Zpracovat \xfačtenku"]})}),h&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b,{value:f,className:"w-full"}),(0,s.jsxs)("p",{className:"text-sm text-center text-gray-600",children:[f<30&&"Nahr\xe1v\xe1m obr\xe1zek...",f>=30&&f<60&&"Rozpozn\xe1v\xe1m text (OCR)...",f>=60&&f<90&&"Zpracov\xe1v\xe1m AI parserem...",f>=90&&"Ukl\xe1d\xe1m do datab\xe1ze..."]})]}),P&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(k,{}),P.success?(0,s.jsxs)(y.Fc,{children:[(0,s.jsx)(D.A,{className:"h-4 w-4"}),(0,s.jsx)(y.TN,{className:"font-medium text-green-800",children:P.message})]}):(0,s.jsxs)(y.Fc,{variant:"destructive",children:[(0,s.jsx)(C.A,{className:"h-4 w-4"}),(0,s.jsx)(y.TN,{children:P.message})]}),P.transaction&&(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{className:"pb-3",children:(0,s.jsxs)(n.ZB,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(D.A,{className:"w-5 h-5 text-green-600"}),"Transakce vytvořena"]})}),(0,s.jsx)(n.Wu,{className:"space-y-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Typ:"}),(0,s.jsx)(l.E,{variant:"income"===P.transaction.type?"default":"secondary",className:"ml-2",children:"income"===P.transaction.type?"Př\xedjem":"V\xfddaj"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Č\xe1stka:"}),(0,s.jsxs)("span",{className:"ml-2 font-bold",children:[P.transaction.amount.toLocaleString()," ",P.transaction.currency]})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Popis:"}),(0,s.jsx)("p",{className:"mt-1",children:P.transaction.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Kategorie:"}),(0,s.jsx)("p",{className:"text-sm",children:P.transaction.category})]}),P.transaction.counterparty&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Dodavatel:"}),(0,s.jsx)("p",{className:"text-sm",children:P.transaction.counterparty})]}),P.transaction.document_number&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Č\xedslo dokladu:"}),(0,s.jsx)("p",{className:"text-sm",children:P.transaction.document_number})]}),P.transaction.items_count>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Položky:"}),(0,s.jsxs)("p",{className:"text-sm",children:[P.transaction.items_count," položek"]})]})]})})]}),(P.ocr_info||P.ai_info)&&(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{className:"pb-3",children:(0,s.jsxs)(n.ZB,{className:"text-sm flex items-center gap-2",children:[(0,s.jsx)(A.A,{className:"w-4 h-4"}),"Detaily zpracov\xe1n\xed"]})}),(0,s.jsxs)(n.Wu,{className:"space-y-3",children:[P.ocr_info&&(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsx)("h4",{className:"font-medium",children:"OCR rozpozn\xe1v\xe1n\xed:"}),(0,s.jsxs)("div",{className:"text-gray-600 space-y-1",children:[(0,s.jsxs)("p",{children:["• Extrahov\xe1no ",P.ocr_info.text_extracted," znaků"]}),(0,s.jsxs)("p",{children:["• Přesnost: ",P.ocr_info.confidence.toFixed(1),"%"]}),(0,s.jsxs)("p",{children:["• Doba zpracov\xe1n\xed: ",P.ocr_info.processing_time]})]})]}),P.ai_info&&(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsx)("h4",{className:"font-medium",children:"AI zpracov\xe1n\xed:"}),(0,s.jsxs)("div",{className:"text-gray-600 space-y-1",children:[(0,s.jsxs)("p",{children:["• Model: ",P.ai_info.model_used]}),(0,s.jsxs)("p",{children:["• Spolehlivost: ",(100*P.ai_info.confidence).toFixed(1),"%"]}),(0,s.jsxs)("p",{children:["• Extrahov\xe1no pol\xed: ",P.ai_info.fields_extracted]})]})]})]})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Podporovan\xe9 form\xe1ty:"})," PNG, JPG, GIF, BMP, TIFF, WebP"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Maxim\xe1ln\xed velikost:"})," 10MB"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Tip:"})," Pro nejlepš\xed v\xfdsledky použijte kvalitn\xed fotografii s dobr\xfdm osvětlen\xedm a ostr\xfdm textem."]})]})]})]})}var O=a(9852),W=a(5784),B=a(6981),E=a(5196);function J(e){let{className:t,...a}=e;return(0,s.jsx)(B.bL,{"data-slot":"checkbox",className:(0,g.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,s.jsx)(B.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,s.jsx)(E.A,{className:"size-3.5"})})})}var L=a(5933),U=a(2355),q=a(3052),H=a(6474),$=a(713),X=a(751);function G(){let e=(0,L._)(["rtl:**:[.rdp-button_next>svg]:rotate-180"],["rtl:**:[.rdp-button\\_next>svg]:rotate-180"]);return G=function(){return e},e}function K(){let e=(0,L._)(["rtl:**:[.rdp-button_previous>svg]:rotate-180"],["rtl:**:[.rdp-button\\_previous>svg]:rotate-180"]);return K=function(){return e},e}function Q(e){let{className:t,classNames:a,showOutsideDays:r=!0,captionLayout:n="label",buttonVariant:i="ghost",formatters:l,components:c,...o}=e,u=(0,$.a)();return(0,s.jsx)(X.h,{showOutsideDays:r,className:(0,g.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw(G()),String.raw(K()),t),captionLayout:n,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...l},classNames:{root:(0,g.cn)("w-fit",u.root),months:(0,g.cn)("flex gap-4 flex-col md:flex-row relative",u.months),month:(0,g.cn)("flex flex-col w-full gap-4",u.month),nav:(0,g.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",u.nav),button_previous:(0,g.cn)((0,d.r)({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",u.button_previous),button_next:(0,g.cn)((0,d.r)({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",u.button_next),month_caption:(0,g.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",u.month_caption),dropdowns:(0,g.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",u.dropdowns),dropdown_root:(0,g.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",u.dropdown_root),dropdown:(0,g.cn)("absolute bg-popover inset-0 opacity-0",u.dropdown),caption_label:(0,g.cn)("select-none font-medium","label"===n?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",u.caption_label),table:"w-full border-collapse",weekdays:(0,g.cn)("flex",u.weekdays),weekday:(0,g.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",u.weekday),week:(0,g.cn)("flex w-full mt-2",u.week),week_number_header:(0,g.cn)("select-none w-(--cell-size)",u.week_number_header),week_number:(0,g.cn)("text-[0.8rem] select-none text-muted-foreground",u.week_number),day:(0,g.cn)("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",u.day),range_start:(0,g.cn)("rounded-l-md bg-accent",u.range_start),range_middle:(0,g.cn)("rounded-none",u.range_middle),range_end:(0,g.cn)("rounded-r-md bg-accent",u.range_end),today:(0,g.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",u.today),outside:(0,g.cn)("text-muted-foreground aria-selected:text-muted-foreground",u.outside),disabled:(0,g.cn)("text-muted-foreground opacity-50",u.disabled),hidden:(0,g.cn)("invisible",u.hidden),...a},components:{Root:e=>{let{className:t,rootRef:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"calendar",ref:a,className:(0,g.cn)(t),...r})},Chevron:e=>{let{className:t,orientation:a,...r}=e;return"left"===a?(0,s.jsx)(U.A,{className:(0,g.cn)("size-4",t),...r}):"right"===a?(0,s.jsx)(q.A,{className:(0,g.cn)("size-4",t),...r}):(0,s.jsx)(H.A,{className:(0,g.cn)("size-4",t),...r})},DayButton:Y,WeekNumber:e=>{let{children:t,...a}=e;return(0,s.jsx)("td",{...a,children:(0,s.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:t})})},...c},...o})}function Y(e){let{className:t,day:a,modifiers:n,...i}=e,l=(0,$.a)(),c=r.useRef(null);return r.useEffect(()=>{var e;n.focused&&(null===(e=c.current)||void 0===e||e.focus())},[n.focused]),(0,s.jsx)(d.$,{ref:c,variant:"ghost",size:"icon","data-day":a.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:(0,g.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",l.day,t),...i})}var ee=a(547);function et(e){let{...t}=e;return(0,s.jsx)(ee.bL,{"data-slot":"popover",...t})}function ea(e){let{...t}=e;return(0,s.jsx)(ee.l9,{"data-slot":"popover-trigger",...t})}function es(e){let{className:t,align:a="center",sideOffset:r=4,...n}=e;return(0,s.jsx)(ee.ZL,{children:(0,s.jsx)(ee.UC,{"data-slot":"popover-content",align:a,sideOffset:r,className:(0,g.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var er=a(9074),en=a(1586),ei=a(3227),el=a(4616),ed=a(4416),ec=a(7414),eo=a(3008),eu=a(2116);let em=[{code:"501100",name:"Spotřeba materi\xe1lu"},{code:"501300",name:"PHM"},{code:"501400",name:"Drobn\xfd majetek"},{code:"512100",name:"Cestovn\xe9"},{code:"513100",name:"Reprezentace"},{code:"518100",name:"N\xe1jemn\xe9"},{code:"518200",name:"Telefon a internet"},{code:"518300",name:"Software"},{code:"518500",name:"Pr\xe1vn\xed a poradensk\xe9 služby"},{code:"518600",name:"Marketing a reklama"},{code:"518900",name:"Ostatn\xed služby"},{code:"549100",name:"Ostatn\xed provozn\xed n\xe1klady"}],ex=[{code:"602100",name:"Tržby za služby"},{code:"602200",name:"Tržby za poradenstv\xed"},{code:"604100",name:"Tržby za zbož\xed"},{code:"648100",name:"Ostatn\xed provozn\xed v\xfdnosy"}],ep=[{value:"hotovost",label:"Hotovost"},{value:"bankovn\xed_převod",label:"Bankovn\xed převod"},{value:"karta",label:"Platebn\xed karta"},{value:"online",label:"Online platba"}],eh=[0,12,21];function ev(e){let{userId:t,initialData:a,onSubmit:l,onCancel:c}=e,[o,m]=(0,r.useState)({type:"expense",description:"",amount:0,currency:"CZK",categoryCode:"",categoryName:"",vatRate:21,vatIncluded:!0,items:[],...a}),[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)("basic"),f=()=>"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),b=(e,t)=>{m(a=>({...a,[e]:t}))},y=(e,t,a)=>{m(s=>({...s,items:s.items.map(s=>{if(s.id!==e)return s;let r={...s,[t]:a};return["quantity","unitPrice","unitPriceWithVat","vatRate"].includes(t)&&(r.unitPriceWithVat>0?r.unitPrice=r.unitPriceWithVat/(1+r.vatRate/100):r.unitPrice>0&&(r.unitPriceWithVat=r.unitPrice*(1+r.vatRate/100)),r.totalWithoutVat=r.unitPrice*r.quantity,r.vatAmount=r.totalWithoutVat*(r.vatRate/100),r.totalWithVat=r.totalWithoutVat+r.vatAmount),r})}))},N=e=>{m(t=>({...t,items:t.items.filter(t=>t.id!==e)}))},w=async e=>{if(e.preventDefault(),!o.description.trim()){Z({title:"Chyběj\xedc\xed popis",description:"Vyplňte pros\xedm popis transakce",variant:"destructive"});return}if(o.amount<=0){Z({title:"Neplatn\xe1 č\xe1stka",description:"Č\xe1stka mus\xed b\xfdt větš\xed než 0",variant:"destructive"});return}if(!o.categoryCode){Z({title:"Chyběj\xedc\xed kategorie",description:"Vyberte pros\xedm kategorii transakce",variant:"destructive"});return}p(!0);try{l&&await l(o),Z({title:"Transakce uložena",description:"Transakce byla \xfaspěšně uložena do syst\xe9mu"})}catch(e){Z({title:"Chyba při ukl\xe1d\xe1n\xed",description:e.message||"Nepodařilo se uložit transakci",variant:"destructive"})}finally{p(!1)}},z=(()=>{let e=o.items.reduce((e,t)=>e+t.totalWithVat,0);return{itemsTotal:e,mainAmount:o.amount,difference:Math.abs(e-o.amount)}})();return(0,s.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"w-5 h-5"}),a?"Upravit transakci":"Nov\xe1 transakce"]}),(0,s.jsx)(n.BT,{children:"Vyplňte detailn\xed informace o transakci pro přesn\xe9 \xfačetn\xed z\xe1znamy"})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)(i.tU,{value:h,onValueChange:g,className:"w-full",children:[(0,s.jsxs)(i.j7,{className:"grid w-full grid-cols-4",children:[(0,s.jsx)(i.Xi,{value:"basic",children:"Z\xe1kladn\xed"}),(0,s.jsx)(i.Xi,{value:"document",children:"Doklad"}),(0,s.jsx)(i.Xi,{value:"counterparty",children:"Protistrana"}),(0,s.jsx)(i.Xi,{value:"items",children:"Položky"})]}),(0,s.jsxs)(i.av,{value:"basic",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{children:"Typ transakce"}),(0,s.jsxs)(W.l6,{value:o.type,onValueChange:e=>b("type",e),children:[(0,s.jsx)(W.bq,{children:(0,s.jsx)(W.yv,{})}),(0,s.jsxs)(W.gC,{children:[(0,s.jsx)(W.eb,{value:"expense",children:"V\xfddaj"}),(0,s.jsx)(W.eb,{value:"income",children:"Př\xedjem"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"amount",children:"Celkov\xe1 č\xe1stka *"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(O.p,{id:"amount",type:"number",step:"0.01",value:o.amount,onChange:e=>b("amount",parseFloat(e.target.value)||0),className:"rounded-r-none",required:!0}),(0,s.jsxs)(W.l6,{value:o.currency,onValueChange:e=>b("currency",e),children:[(0,s.jsx)(W.bq,{className:"w-20 rounded-l-none border-l-0",children:(0,s.jsx)(W.yv,{})}),(0,s.jsxs)(W.gC,{children:[(0,s.jsx)(W.eb,{value:"CZK",children:"CZK"}),(0,s.jsx)(W.eb,{value:"EUR",children:"EUR"}),(0,s.jsx)(W.eb,{value:"USD",children:"USD"})]})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"description",children:"Popis transakce *"}),(0,s.jsx)(O.p,{id:"description",value:o.description,onChange:e=>b("description",e.target.value),placeholder:"Např. N\xe1kup kancel\xe1řsk\xfdch potřeb",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{children:"Kategorie *"}),(0,s.jsxs)(W.l6,{value:o.categoryCode,onValueChange:e=>{let t=("expense"===o.type?em:ex).find(t=>t.code===e);m(a=>({...a,categoryCode:e,categoryName:(null==t?void 0:t.name)||""}))},children:[(0,s.jsx)(W.bq,{children:(0,s.jsx)(W.yv,{placeholder:"Vyberte kategorii"})}),(0,s.jsx)(W.gC,{children:("expense"===o.type?em:ex).map(e=>(0,s.jsxs)(W.eb,{value:e.code,children:[e.code," - ",e.name]},e.code))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{children:"Sazba DPH (%)"}),(0,s.jsxs)(W.l6,{value:o.vatRate.toString(),onValueChange:e=>b("vatRate",parseInt(e)),children:[(0,s.jsx)(W.bq,{children:(0,s.jsx)(W.yv,{})}),(0,s.jsx)(W.gC,{children:eh.map(e=>(0,s.jsxs)(W.eb,{value:e.toString(),children:[e,"%"]},e))})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 pt-6",children:[(0,s.jsx)(J,{id:"vatIncluded",checked:o.vatIncluded,onCheckedChange:e=>b("vatIncluded",e)}),(0,s.jsx)(v.J,{htmlFor:"vatIncluded",children:"DPH je zahrnuto v ceně"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"notes",children:"Pozn\xe1mky"}),(0,s.jsx)(j,{id:"notes",value:o.notes||"",onChange:e=>b("notes",e.target.value),placeholder:"Dodatečn\xe9 pozn\xe1mky k transakci",rows:2})]})]}),(0,s.jsxs)(i.av,{value:"document",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"documentNumber",children:"Č\xedslo dokladu"}),(0,s.jsx)(O.p,{id:"documentNumber",value:o.documentNumber||"",onChange:e=>b("documentNumber",e.target.value),placeholder:"Např. 2024001234"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{children:"Datum vystaven\xed"}),(0,s.jsxs)(et,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsxs)(d.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,s.jsx)(er.A,{className:"mr-2 h-4 w-4"}),o.documentDate?(0,eo.GP)(o.documentDate,"d. MMMM yyyy",{locale:eu.cs}):(0,s.jsx)("span",{children:"Vyberte datum"})]})}),(0,s.jsx)(es,{className:"w-auto p-0",children:(0,s.jsx)(Q,{mode:"single",selected:o.documentDate,onSelect:e=>b("documentDate",e),initialFocus:!0})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{children:"Datum splatnosti"}),(0,s.jsxs)(et,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsxs)(d.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,s.jsx)(er.A,{className:"mr-2 h-4 w-4"}),o.dueDate?(0,eo.GP)(o.dueDate,"d. MMMM yyyy",{locale:eu.cs}):(0,s.jsx)("span",{children:"Vyberte datum"})]})}),(0,s.jsx)(es,{className:"w-auto p-0",children:(0,s.jsx)(Q,{mode:"single",selected:o.dueDate,onSelect:e=>b("dueDate",e),initialFocus:!0})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{children:"Datum \xfahrady"}),(0,s.jsxs)(et,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsxs)(d.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,s.jsx)(er.A,{className:"mr-2 h-4 w-4"}),o.paymentDate?(0,eo.GP)(o.paymentDate,"d. MMMM yyyy",{locale:eu.cs}):(0,s.jsx)("span",{children:"Vyberte datum"})]})}),(0,s.jsx)(es,{className:"w-auto p-0",children:(0,s.jsx)(Q,{mode:"single",selected:o.paymentDate,onSelect:e=>b("paymentDate",e),initialFocus:!0})})]})]})]}),(0,s.jsx)(k,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(en.A,{className:"w-4 h-4"}),"Platebn\xed \xfadaje"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{children:"Způsob platby"}),(0,s.jsxs)(W.l6,{value:o.paymentMethod||"",onValueChange:e=>b("paymentMethod",e),children:[(0,s.jsx)(W.bq,{children:(0,s.jsx)(W.yv,{placeholder:"Vyberte způsob"})}),(0,s.jsx)(W.gC,{children:ep.map(e=>(0,s.jsx)(W.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"bankAccount",children:"Bankovn\xed \xfačet"}),(0,s.jsx)(O.p,{id:"bankAccount",value:o.bankAccount||"",onChange:e=>b("bankAccount",e.target.value),placeholder:"123456789/0300"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"variableSymbol",children:"Variabiln\xed symbol"}),(0,s.jsx)(O.p,{id:"variableSymbol",value:o.variableSymbol||"",onChange:e=>b("variableSymbol",e.target.value),placeholder:"2024001234"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"constantSymbol",children:"Konstantn\xed symbol"}),(0,s.jsx)(O.p,{id:"constantSymbol",value:o.constantSymbol||"",onChange:e=>b("constantSymbol",e.target.value),placeholder:"0308"})]})]})]})]}),(0,s.jsxs)(i.av,{value:"counterparty",className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(ei.A,{className:"w-4 h-4"}),"Informace o protistraně"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(v.J,{htmlFor:"counterpartyName",children:"N\xe1zev firmy"}),(0,s.jsx)(O.p,{id:"counterpartyName",value:o.counterpartyName||"",onChange:e=>b("counterpartyName",e.target.value),placeholder:"N\xe1zev společnosti s.r.o."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"counterpartyIco",children:"IČO"}),(0,s.jsx)(O.p,{id:"counterpartyIco",value:o.counterpartyIco||"",onChange:e=>b("counterpartyIco",e.target.value),placeholder:"12345678",maxLength:8})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"counterpartyDic",children:"DIČ"}),(0,s.jsx)(O.p,{id:"counterpartyDic",value:o.counterpartyDic||"",onChange:e=>b("counterpartyDic",e.target.value),placeholder:"CZ12345678"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(v.J,{htmlFor:"counterpartyAddress",children:"Adresa"}),(0,s.jsx)(j,{id:"counterpartyAddress",value:o.counterpartyAddress||"",onChange:e=>b("counterpartyAddress",e.target.value),placeholder:"Ulice 123, 110 00 Praha",rows:2})]})]})]}),(0,s.jsxs)(i.av,{value:"items",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Položky faktury"}),(0,s.jsxs)(d.$,{type:"button",onClick:()=>{let e={id:f(),description:"",quantity:1,unit:"ks",unitPrice:0,unitPriceWithVat:0,vatRate:o.vatRate,totalWithoutVat:0,vatAmount:0,totalWithVat:0};m(t=>({...t,items:[...t.items,e]}))},size:"sm",children:[(0,s.jsx)(el.A,{className:"w-4 h-4 mr-2"}),"Přidat položku"]})]}),0===o.items.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(A.A,{className:"w-8 h-8 mx-auto mb-2"}),(0,s.jsx)("p",{children:"Ž\xe1dn\xe9 položky"}),(0,s.jsx)("p",{className:"text-sm",children:'Klikněte na "Přidat položku" pro detailn\xed rozpis faktury'})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[o.items.map(e=>(0,s.jsx)(n.Zp,{children:(0,s.jsxs)(n.Wu,{className:"pt-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-2 items-end",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(v.J,{className:"text-xs",children:"Popis"}),(0,s.jsx)(O.p,{value:e.description,onChange:t=>y(e.id,"description",t.target.value),placeholder:"N\xe1zev položky",className:"text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{className:"text-xs",children:"Množstv\xed"}),(0,s.jsx)(O.p,{type:"number",step:"0.01",value:e.quantity,onChange:t=>y(e.id,"quantity",parseFloat(t.target.value)||0),className:"text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{className:"text-xs",children:"Jednotka"}),(0,s.jsx)(O.p,{value:e.unit,onChange:t=>y(e.id,"unit",t.target.value),placeholder:"ks",className:"text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{className:"text-xs",children:"Cena s DPH"}),(0,s.jsx)(O.p,{type:"number",step:"0.01",value:e.unitPriceWithVat,onChange:t=>y(e.id,"unitPriceWithVat",parseFloat(t.target.value)||0),className:"text-sm"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(d.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(e.id),children:(0,s.jsx)(ed.A,{className:"w-4 h-4"})})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-2 mt-2 text-xs text-gray-600",children:[(0,s.jsxs)("div",{children:["Cena bez DPH: ",e.unitPrice.toFixed(2)]}),(0,s.jsxs)("div",{children:["DPH: ",e.vatAmount.toFixed(2)]}),(0,s.jsxs)("div",{children:["Celkem bez DPH: ",e.totalWithoutVat.toFixed(2)]}),(0,s.jsxs)("div",{className:"font-medium",children:["Celkem s DPH: ",e.totalWithVat.toFixed(2)]})]})]})},e.id)),(0,s.jsx)(n.Zp,{children:(0,s.jsx)(n.Wu,{className:"pt-4",children:(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Součet položek:"}),(0,s.jsxs)("span",{className:"font-medium",children:[z.itemsTotal.toFixed(2)," ",o.currency]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Hlavn\xed č\xe1stka:"}),(0,s.jsxs)("span",{className:"font-medium",children:[o.amount.toFixed(2)," ",o.currency]})]}),z.difference>.01&&(0,s.jsxs)("div",{className:"flex justify-between text-amber-600",children:[(0,s.jsx)("span",{children:"Rozd\xedl:"}),(0,s.jsxs)("span",{className:"font-medium",children:[z.difference.toFixed(2)," ",o.currency]})]})]})})})]})]})]})})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(d.$,{type:"submit",disabled:x,className:"flex-1",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec.A,{className:"w-4 h-4 mr-2"}),"Ukl\xe1d\xe1m..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec.A,{className:"w-4 h-4 mr-2"}),a?"Uložit změny":"Vytvořit transakci"]})}),c&&(0,s.jsx)(d.$,{type:"button",variant:"outline",onClick:c,children:"Zrušit"})]})]})}function eg(){let[e,t]=(0,r.useState)([]),[a,p]=(0,r.useState)("upload"),v=e=>{let a={...e,created_at:new Date().toISOString()};t(e=>[a,...e]),Z({title:"Demo transakce vytvořena",description:"Transakce ".concat(e.description," byla přid\xe1na do seznamu")})},g=async e=>{await new Promise(e=>setTimeout(e,1e3)),v({id:Date.now(),type:e.type,description:e.description,amount:e.amount,currency:e.currency,category:e.categoryName,document_number:e.documentNumber,counterparty:e.counterpartyName,items_count:e.items.length,created_at:new Date().toISOString()})};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(h(),{href:"/",children:(0,s.jsxs)(d.$,{variant:"ghost",size:"sm",children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Zpět na hlavn\xed str\xe1nku"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"\xdačtoBot - Pokročil\xe9 funkce"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Demo nov\xfdch \xfačetn\xedch funkc\xed s OCR a AI zpracov\xe1n\xedm"})]})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{className:"pb-3",children:(0,s.jsxs)(n.ZB,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"w-5 h-5 text-blue-600"}),"OCR Zpracov\xe1n\xed"]})}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Vyfotografujte \xfačtenku a AI automaticky extrahuje všechny \xfadaje včetně položek, dodavatele a DPH."})})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{className:"pb-3",children:(0,s.jsxs)(n.ZB,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"w-5 h-5 text-green-600"}),"Detailn\xed transakce"]})}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Kompletn\xed formul\xe1ř s položkami faktury, \xfadaji o dodavateli, IČO, DIČ a platebn\xedmi \xfadaji."})})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{className:"pb-3",children:(0,s.jsxs)(n.ZB,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"w-5 h-5 text-purple-600"}),"AI Validace"]})}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"AI kontroluje IČO přes ARES, validuje DPH v\xfdpočty a navrhuje spr\xe1vn\xe9 kategorie."})})]})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Nov\xe9 \xfačetn\xed funkce"}),(0,s.jsx)(n.BT,{children:"Vyzkoušejte pokročil\xe9 funkce pro profesion\xe1ln\xed \xfačetnictv\xed OSVČ"})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)(i.tU,{value:a,onValueChange:p,children:[(0,s.jsxs)(i.j7,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(i.Xi,{value:"upload",className:"flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),"Nahr\xe1t \xfačtenku"]}),(0,s.jsxs)(i.Xi,{value:"manual",className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),"Ručn\xed zad\xe1n\xed"]})]}),(0,s.jsx)(i.av,{value:"upload",className:"space-y-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCF8 OCR Demo"}),(0,s.jsxs)("p",{className:"text-blue-700 text-sm",children:[(0,s.jsx)("strong",{children:"Pozn\xe1mka:"})," Pro plnou funkcionalnost OCR je potřeba nainstalovat Tesseract OCR na serveru. V demo režimu se zobraz\xed simulovan\xe9 v\xfdsledky."]})]}),(0,s.jsx)(M,{userId:1,onTransactionCreated:v})]})}),(0,s.jsx)(i.av,{value:"manual",className:"space-y-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-green-900 mb-2",children:"\uD83D\uDCDD Detailn\xed formul\xe1ř"}),(0,s.jsx)("p",{className:"text-green-700 text-sm",children:"Vyplňte všechny \xfačetn\xed \xfadaje včetně položek faktury, \xfadajů o dodavateli a platebn\xedch informac\xed."})]}),(0,s.jsx)(ev,{userId:1,onSubmit:g})]})})]})})]})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)(n.Zp,{className:"sticky top-4",children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"w-5 h-5"}),"Demo transakce"]}),(0,s.jsx)(n.BT,{children:"Transakce vytvořen\xe9 v t\xe9to demo session"})]}),(0,s.jsx)(n.Wu,{children:0===e.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(u.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"Zat\xedm ž\xe1dn\xe9 transakce"}),(0,s.jsx)("p",{className:"text-sm",children:"Vytvořte prvn\xed transakci pomoc\xed formul\xe1ře nebo nahr\xe1n\xedm \xfačtenky"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,s.jsx)(n.Zp,{className:"p-3",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)(l.E,{variant:"income"===e.type?"default":"secondary",children:"income"===e.type?"Př\xedjem":"V\xfddaj"}),(0,s.jsxs)("span",{className:"font-bold text-sm",children:[e.amount.toLocaleString()," ",e.currency]})]}),(0,s.jsx)("h4",{className:"font-medium text-sm",children:e.description}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsxs)("div",{children:["Kategorie: ",e.category]}),e.counterparty&&(0,s.jsxs)("div",{children:["Dodavatel: ",e.counterparty]}),e.document_number&&(0,s.jsxs)("div",{children:["Doklad: ",e.document_number]}),e.items_count>0&&(0,s.jsxs)("div",{children:["Položky: ",e.items_count]}),e.created_at&&(0,s.jsxs)("div",{children:["Vytvořeno: ",new Date(e.created_at).toLocaleString("cs-CZ")]})]})]})},e.id)),e.length>0&&(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["Celkem: ",e.length," transakc\xed"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Demo data - neukl\xe1daj\xed se do datab\xe1ze"})]})]})})]})})]}),(0,s.jsx)("div",{className:"mt-12",children:(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"w-5 h-5"}),"Technick\xe9 informace"]})}),(0,s.jsxs)(n.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"Backend rozš\xedřen\xed:"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsx)("li",{children:"• Rozš\xedřen\xe9 datab\xe1zov\xe9 modely (Transaction, TransactionItem, TransactionAttachment)"}),(0,s.jsx)("li",{children:"• OCR endpoint s podporou Tesseract"}),(0,s.jsx)("li",{children:"• Enhanced AI parser s Groq LLaMA-70B"}),(0,s.jsx)("li",{children:"• ARES validace IČO/DIČ"}),(0,s.jsx)("li",{children:"• Automatick\xe9 DPH v\xfdpočty"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"Frontend komponenty:"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsx)("li",{children:"• ReceiptUpload - drag & drop, preview, progress"}),(0,s.jsx)("li",{children:"• TransactionForm - multi-tab detailn\xed formul\xe1ř"}),(0,s.jsx)("li",{children:"• Validace, kalkulace DPH, položky faktury"}),(0,s.jsx)("li",{children:"• Real-time feedback a notifikace"}),(0,s.jsx)("li",{children:"• Responsive design pro všechna zař\xedzen\xed"})]})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"API Endpointy:"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"/ocr/status"})," - Kontrola OCR služby"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"/ocr/process-receipt"})," - Zpracov\xe1n\xed \xfačtenky"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"/ocr/extract-text"})," - Pouze extrakce textu"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"/ocr/languages"})," - Podporovan\xe9 jazyky"]})]})]})]})]})]})})]})]})}},2714:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var s=a(5155);a(2115);var r=a(968),n=a(3999);function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},4959:(e,t,a)=>{Promise.resolve().then(a.bind(a,2181))},4964:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>d,av:()=>c,j7:()=>l,tU:()=>i});var s=a(5155);a(2115);var r=a(64),n=a(3999);function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",t),...a})}},5784:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>x,gC:()=>m,l6:()=>c,yv:()=>o});var s=a(5155);a(2115);var r=a(8715),n=a(6474),i=a(5196),l=a(7863),d=a(3999);function c(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"select",...t})}function o(e){let{...t}=e;return(0,s.jsx)(r.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:a="default",children:i,...l}=e;return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":a,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[i,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:a,position:n="popper",...i}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,s.jsx)(p,{}),(0,s.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(h,{})]})})}function x(e){let{className:t,children:a,...n}=e;return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(i.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:a})]})}function p(e){let{className:t,...a}=e;return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.A,{className:"size-4"})})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(n.A,{className:"size-4"})})}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>l});var s=a(5155);a(2115);var r=a(9708),n=a(2085),i=a(3999);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:n,asChild:d=!1,...c}=e,o=d?r.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:t})),...c})}},8145:(e,t,a)=>{"use strict";a.d(t,{E:()=>d});var s=a(5155);a(2115);var r=a(9708),n=a(2085),i=a(3999);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,asChild:n=!1,...d}=e,c=n?r.DX:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(l({variant:a}),t),...d})}},8482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>o});var s=a(5155);a(2115);var r=a(3999);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},9026:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>l,TN:()=>d});var s=a(5155);a(2115);var r=a(2085),n=a(3999);let i=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(i({variant:a}),t),...r})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(5155);a(2115);var r=a(3999);function n(e){let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}}},e=>{var t=t=>e(e.s=t);e.O(0,[455,737,569,441,684,358],()=>t(4959)),_N_E=e.O()}]);